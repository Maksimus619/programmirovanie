#include "freertos/FreeRTOS.h"
#include "freertos/task.h"
#include "driver/gpio.h"

#define LED GPIO_NUM_32
#define RELAY GPIO_NUM_33

void app_main(void)
{
  gpio_set_direction(LED, GPIO_MODE_OUTPUT);
  gpio_set_direction(RELAY, GPIO_MODE_INPUT_OUTPUT);

  uint32_t ticks = 0;
  while (true)
  {
        // Определяем частоту мигания в зависимости от состояния реле
    int divider = gpio_get_level(RELAY) ? 2 : 10; // 5 Гц или 1 Гц
    gpio_set_level(LED, (ticks % divider) == 0);
    if (ticks % 100 == 0)
      gpio_set_level(RELAY, !gpio_get_level(RELAY));
    
    ticks++;
    vTaskDelay(100 / portTICK_PERIOD_MS);
  }
}